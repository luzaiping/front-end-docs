# xss

## 定义:

cross site scripting, 简写应该是 css，因为跟 层叠样式表 冲突，所以改成 XSS (X 是因为 croos 表示交叉的意思，所以用 X 来表示)。 xss 是一种代码注入攻击，攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息，如 cookie，sessionID等，进而危害数据安全。

xss的本质是：恶意代码未经过滤，与网站的正常代码混合在一起，浏览器无法识别脚本是否可信，导致恶意脚本也会被执行。

而由于直接在用户的浏览器执行，恶意代码能够直接获取用户的信息(cookie sessionId)，或者利用这些信息冒充用户向网站发起攻击者定义的请求

## 分类：

xss 攻击可以分为三种：

+ 反射型
+ 存储型
+ DOM型

### 反射型

反射型 XSS 的攻击步骤：

1. 攻击者构造出特殊的 URL，其中包含恶意代码。
1. 用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，拼接在 HTML 中返回给浏览器。
1. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。
1. 恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。

反射型 XSS 的恶意代码存在 URL 里。漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等

### 存储型

#### 攻击步骤

1. 攻击者将恶意代码提交到目标网站的数据库中
1. 用户打开目标网站时，网站服务端将恶意代码从数据库取出，拼接在 HTML 中返回给浏览器。
1. 用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。
1. 恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。

这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。
